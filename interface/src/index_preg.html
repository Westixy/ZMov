<input type="text" id="input" value=""/>
<button onclick="break_down();">Entrer</button>
<div id="result"></div>
<script>
  var input = '';

  function break_down(){

    var prem = ["John", "Edit", "Mary"];
    var deux = 'Bonjour Mon Cheval';
    var troi = '19940621';

    input = document.getElementById("input").value;

    var output = false;

    if(input.indexOf(":") != -1){ // if the input contains ":" (search with parameters)
      // string split for parameters like a: n: d: ****************************************************
      var parameters = input.split(';');

      // specific variable
      var actors = '';
      var names = '';
      var dates = '';

      // now 2 first characters of each cell are the parameters exemple parameters[0] => "a:John Sotillo"
      for(var i = 0; i < parameters.length; i++){

        parameters[i] = parameters[i].split(":"); // split the parameter char and the value

        // all parameters are reparted on a specific variable
        switch(parameters[i][0]){
          case "a" : actors = parameters[i][1];
            break;
          case "n" : names = parameters[i][1];
            break;
          case "d" : dates = parameters[i][1];
            break;
        }
      }

      // treatment of data tables of parameters
      function stockDataSearched(tables){
        var table; // array

        if(tables.indexOf("|") != -1){ // if OR treatment has been request
          var searchTable = tables.split("|");

          table = new Array();

          for(var i = 0; i < searchTable.length; i++){

            table[table.length] = new Array();

            if(searchTable[i].indexOf("&") != -1){ // if AND treatment has been request

              tmp = searchTable[i].split("&");
              for(var d = 0; d < tmp.length; d++){
                table[i].push(tmp[d]);
              }

            }else{
              table[i].push(searchTable[i]);
            }
          }
        }else if(tables.indexOf("&") != -1){ // if AND treatment only has been request
          table = new Array;
          table[0] = tables.split("&");
        }else{
          table = new Array;
          table[0] = [tables,'']; //here there is a simple string data in actors so we put an empty cell because actor have to be an array
        }
        return table;
      }

      // data treatments
      var actor = stockDataSearched(actors); // array
      var name = stockDataSearched(names); // array
      var date = stockDataSearched(dates); // array


      for(var i = 0; i < actor.length; i++){
        for(var c = 0; i < actor[i].length; c++){
          if(actor[i][c] != ""){
            //console.log(actor[i][c]);
          }
          for(var d = 0; d < prem.length; d++){

          }
        }
      }


      // test of function
      console.log(actor);
      document.getElementById("result").innerHTML += "<br/><u>acteurs :</u><br/>";
      actor.forEach(display);
      document.getElementById("result").innerHTML += "<br/><u>Noms de films :</u><br/>";
      name.forEach(display);
      document.getElementById("result").innerHTML += "<br/><u>dates :</u><br/>";
      date.forEach(display);


      if(output == true){
        alert("c'est bon !");
      }else{
        alert("Arg Merde :/");
      }


    }else{
      // TODO : treatment without parameters
    }
  }
  // display results from search
  function display(element, index, array){
    document.getElementById("result").innerHTML += index + " " + element + "<br/>";
  }


</script>
